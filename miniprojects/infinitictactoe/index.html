<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, user-scalable=no"
    />
    <title>InfiniTicTacToe</title>

    <link rel="stylesheet" href="infinitictactoe.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="overctn">
      <span id="currTurn">Turn: <span id="currTurnOX">O</span></span>
      <div id="tic">
        <div class="tac" data-tac="0"></div>
        <div class="tac" data-tac="1"></div>
        <div class="tac" data-tac="2"></div>
        <div class="tac" data-tac="3"></div>
        <div class="tac" data-tac="4"></div>
        <div class="tac" data-tac="5"></div>
        <div class="tac" data-tac="6"></div>
        <div class="tac" data-tac="7"></div>
        <div class="tac" data-tac="8"></div>
      </div>
    </div>

    <span id="azim">azim.codes</span>
    <span id="ver">a1.0</span>

    <script>
      const moves = [];
      const cells = document.querySelectorAll(".tac");
      const currTurn = document.querySelector("#currTurnOX");
      let currentPlayer = "O";

      cells.forEach((cell) => {
        cell.addEventListener("click", () => {
            
          if (!cell.textContent) {
            cell.textContent = currentPlayer;
            currTurn.textContent = currentPlayer === "X" ? "O" : "X";
            moves.push(cell);

            // resets all dim
            moves.forEach((move) => {
              move.style.color = "black";
            });

            // dim to-disappear
            if (moves.length > 5) {
              moves[0].style.color = "rgba(0,0,0,0.25)";
            }

            if (moves.length > 6) {
              const earliestMove = moves.shift();
              moves[0].style.color = "rgba(0,0,0,0.25)";
              earliestMove.textContent = "";
            }
            currentPlayer = currentPlayer === "X" ? "O" : "X";
          }
        });
      });
    </script>
  </body>
</html>
